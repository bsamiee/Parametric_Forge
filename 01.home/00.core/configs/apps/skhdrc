# Title         : skhdrc
# Author        : Bardia Samiee
# Project       : Parametric Forge
# License       : MIT
# Path          : /01.home/00.core/configs/apps/skhdrc
# ----------------------------------------------------------------------------
# Unified hotkey configuration with conflict-free hierarchy

# --- BLACKLIST: Applications that should not receive skhd hotkeys -----------
# These apps handle their own keyboard shortcuts or need full keyboard access
.blacklist [
"1Password 7"
"secure keyboard entry"
"Activity Monitor"
"System Settings"
"System Preferences"
]

# --- LEVEL 1: Window Focus Navigation (CMD + hjkl) --------------------------
# Using CMD instead of ALT to avoid terminal conflicts
# Application-specific overrides: preserve IDE and terminal navigation
cmd - h : [
"WezTerm" ~ # Let WezTerm handle its own pane navigation
"Code" ~    # Preserve VS Code navigation
"Visual Studio Code" ~
"IntelliJ IDEA" ~
"*" : yabai -m window --focus west
]

cmd - j : [
"WezTerm" ~
"Code" ~
"Visual Studio Code" ~
"IntelliJ IDEA" ~
"*" : yabai -m window --focus south
]

cmd - k : [
"WezTerm" ~
"Code" ~
"Visual Studio Code" ~
"IntelliJ IDEA" ~
"*" : yabai -m window --focus north
]

cmd - l : [
"WezTerm" ~
"Code" ~
"Visual Studio Code" ~
"IntelliJ IDEA" ~
"*" : yabai -m window --focus east
]

# Display focus (unchanged - these are safe)
alt - s : yabai -m display --focus west
alt - g : yabai -m display --focus east

# --- LEVEL 2: Space Navigation (ALT + numbers) ------------------------------
# Complete 1-9 coverage for space focus
alt - 1 : yabai -m space --focus 1
alt - 2 : yabai -m space --focus 2
alt - 3 : yabai -m space --focus 3
alt - 4 : yabai -m space --focus 4
alt - 5 : yabai -m space --focus 5
alt - 6 : yabai -m space --focus 6
alt - 7 : yabai -m space --focus 7
alt - 8 : yabai -m space --focus 8
alt - 9 : yabai -m space --focus 9

# --- LEVEL 3: Window Manipulation (CMD + ALT) -------------------------------
# Window swapping (replacing undefined "hyper")
cmd + alt - h : yabai -m window --swap west
cmd + alt - j : yabai -m window --swap south
cmd + alt - k : yabai -m window --swap north
cmd + alt - l : yabai -m window --swap east

# Window warping (move and split)
ctrl + alt - h : yabai -m window --warp west
ctrl + alt - j : yabai -m window --warp south
ctrl + alt - k : yabai -m window --warp north
ctrl + alt - l : yabai -m window --warp east

# Move window to space and follow (complete 1-9)
cmd + alt - 1 : yabai -m window --space 1
yabai -m space --focus 1
cmd + alt - 2 : yabai -m window --space 2
yabai -m space --focus 2
cmd + alt - 3 : yabai -m window --space 3
yabai -m space --focus 3
cmd + alt - 4 : yabai -m window --space 4
yabai -m space --focus 4
cmd + alt - 5 : yabai -m window --space 5
yabai -m space --focus 5
cmd + alt - 6 : yabai -m window --space 6
yabai -m space --focus 6
cmd + alt - 7 : yabai -m window --space 7
yabai -m space --focus 7
cmd + alt - 8 : yabai -m window --space 8
yabai -m space --focus 8
cmd + alt - 9 : yabai -m window --space 9
yabai -m space --focus 9

# Move window to prev/next space
cmd + alt - p : yabai -m window --space prev
yabai -m space --focus prev
cmd + alt - n : yabai -m window --space next
yabai -m space --focus next

# Move window to display
cmd + alt - s : yabai -m window --display west
yabai -m display --focus west
cmd + alt - g : yabai -m window --display east
yabai -m display --focus east

# --- LEVEL 4: Window Resizing (CTRL + ALT + hjkl) ---------------------------
# Smart resize with dual operations (works on both sides of BSP splits)
lctrl + alt - h : yabai -m window --resize left:-50:0 || yabai -m window --resize right:-50:0
lctrl + alt - j : yabai -m window --resize bottom:0:50 || yabai -m window --resize top:0:50
lctrl + alt - k : yabai -m window --resize top:0:-50 || yabai -m window --resize bottom:0:-50
lctrl + alt - l : yabai -m window --resize right:50:0 || yabai -m window --resize left:50:0

# --- LEVEL 5: Layout Control (CMD + ALT + SHIFT) ----------------------------
cmd + alt + shift - e : yabai -m space --balance
cmd + alt + shift - r : yabai -m space --rotate 270
cmd + alt + shift - x : yabai -m space --mirror x-axis
cmd + alt + shift - y : yabai -m space --mirror y-axis
cmd + alt + shift - t : yabai -m window --toggle float --grid 4:4:1:1:2:2
cmd + alt + shift - m : yabai -m window --toggle zoom-fullscreen
cmd + alt + shift - g : yabai -m space --toggle padding && yabai -m space --toggle gap

# --- LEVEL 6: Window Insertion Points (SHIFT + CTRL + ALT + hjkl) -----------
shift + lctrl + alt - h : yabai -m window --insert west
shift + lctrl + alt - j : yabai -m window --insert south
shift + lctrl + alt - k : yabai -m window --insert north
shift + lctrl + alt - l : yabai -m window --insert east

# --- LEVEL 7: Stack Navigation (SHIFT + CTRL + n/p) -------------------------
# Navigate between stacked windows
shift + ctrl - n : yabai -m window --focus stack.next || yabai -m window --focus next
shift + ctrl - p : yabai -m window --focus stack.prev || yabai -m window --focus prev
shift + ctrl - f : yabai -m window --focus stack.first
shift + ctrl - l : yabai -m window --focus stack.last

# Add window to stack in direction
shift + ctrl + alt - h : yabai -m window west --stack $(yabai -m query --windows --window | jq -r '.id')
shift + ctrl + alt - j : yabai -m window south --stack $(yabai -m query --windows --window | jq -r '.id')
shift + ctrl + alt - k : yabai -m window north --stack $(yabai -m query --windows --window | jq -r '.id')
shift + ctrl + alt - l : yabai -m window east --stack $(yabai -m query --windows --window | jq -r '.id')

# --- LEVEL 8: Dynamic Space Management ---------------------------------------
# Create new space and focus it
shift + cmd - n : yabai -m space --create &&
  index="$(yabai -m query --spaces --display | jq '.[-1].index')" &&
  yabai -m space --focus "${index}"

# Create new space, move window, and follow
shift + cmd - m : yabai -m space --create &&
  index="$(yabai -m query --spaces --display | jq '.[-1].index')" &&
  yabai -m window --space "${index}" &&
  yabai -m space --focus "${index}"

# Destroy empty space
shift + cmd - w : yabai -m space --destroy

# Dynamic space navigation with fallback
alt - tab : yabai -m space --focus recent || yabai -m space --focus first

# --- Service Management -----------------------------------------------------
ctrl + alt - q : brew services stop yabai
ctrl + alt - s : brew services start yabai
ctrl + alt - r : brew services restart yabai
