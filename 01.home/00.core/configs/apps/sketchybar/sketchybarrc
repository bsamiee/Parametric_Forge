#!/bin/bash
# Title         : sketchybarrc
# Author        : Bardia Samiee
# Project       : Parametric Forge
# License       : MIT
# Path          : /01.home/00.core/configs/apps/sketchybar/sketchybarrc
# ----------------------------------------------------------------------------
# SketchyBar configuration bootstrap - launches SbarLua configuration

set -euo pipefail

# Validate sbarlua availability
if ! command -v sbarlua >/dev/null 2>&1; then
    echo "ERROR: sbarlua not found in PATH" >&2
    echo "Install with: nix profile install nixpkgs#sbarlua" >&2
    exit 1
fi

# Get config directory
CONFIG_DIR="$(dirname "$0")"
INIT_LUA="$CONFIG_DIR/init.lua"

# Validate Lua config exists
if [[ ! -f "$INIT_LUA" ]]; then
    echo "ERROR: init.lua not found at $INIT_LUA" >&2
    exit 1
fi

echo "SketchyBar: Starting SbarLua configuration..."
echo "  Config: $INIT_LUA"

# Execute SbarLua with our configuration
exec sbarlua "$INIT_LUA"